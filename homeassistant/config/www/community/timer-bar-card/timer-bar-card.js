/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function t(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const e=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol();class n{constructor(t,e){if(e!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){return e&&void 0===this.t&&(this.t=new CSSStyleSheet,this.t.replaceSync(this.cssText)),this.t}toString(){return this.cssText}}const s=new Map,r=t=>{let e=s.get(t);return void 0===e&&s.set(t,e=new n(t,i)),e},o=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(t instanceof n)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return r(i)},a=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>r("string"==typeof t?t:t+""))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var l,h,c,u;const d={toAttribute(t,e){switch(e){case Boolean:t=t?"":null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,e)=>e!==t&&(e==e||t==t),m={attribute:!0,type:String,converter:d,reflect:!1,hasChanged:f};class g extends HTMLElement{constructor(){super(),this.Πi=new Map,this.Πo=void 0,this.Πl=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.Πh=null,this.u()}static addInitializer(t){var e;null!==(e=this.v)&&void 0!==e||(this.v=[]),this.v.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const n=this.Πp(i,e);void 0!==n&&(this.Πm.set(n,i),t.push(n))})),t}static createProperty(t,e=m){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,i,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(n){const s=this[t];this[e]=n,this.requestUpdate(t,s,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||m}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this.Πm=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(a(t))}else void 0!==t&&e.push(a(t));return e}static"Πp"(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this.Πg=new Promise((t=>this.enableUpdating=t)),this.L=new Map,this.Π_(),this.requestUpdate(),null===(t=this.constructor.v)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this.ΠU)&&void 0!==e?e:this.ΠU=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this.ΠU)||void 0===e||e.splice(this.ΠU.indexOf(t)>>>0,1)}"Π_"(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this.Πi.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const i=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,i)=>{e?t.adoptedStyleSheets=i.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):i.forEach((e=>{const i=document.createElement("style");i.textContent=e.cssText,t.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)})),this.Πl&&(this.Πl(),this.Πo=this.Πl=void 0)}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)})),this.Πo=new Promise((t=>this.Πl=t))}attributeChangedCallback(t,e,i){this.K(t,i)}"Πj"(t,e,i=m){var n,s;const r=this.constructor.Πp(t,i);if(void 0!==r&&!0===i.reflect){const o=(null!==(s=null===(n=i.converter)||void 0===n?void 0:n.toAttribute)&&void 0!==s?s:d.toAttribute)(e,i.type);this.Πh=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this.Πh=null}}K(t,e){var i,n,s;const r=this.constructor,o=r.Πm.get(t);if(void 0!==o&&this.Πh!==o){const t=r.getPropertyOptions(o),a=t.converter,l=null!==(s=null!==(n=null===(i=a)||void 0===i?void 0:i.fromAttribute)&&void 0!==n?n:"function"==typeof a?a:null)&&void 0!==s?s:d.fromAttribute;this.Πh=o,this[o]=l(e,t.type),this.Πh=null}}requestUpdate(t,e,i){let n=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||f)(this[t],e)?(this.L.has(t)||this.L.set(t,e),!0===i.reflect&&this.Πh!==t&&(void 0===this.Πk&&(this.Πk=new Map),this.Πk.set(t,i))):n=!1),!this.isUpdatePending&&n&&(this.Πg=this.Πq())}async"Πq"(){this.isUpdatePending=!0;try{for(await this.Πg;this.Πo;)await this.Πo}catch(t){Promise.reject(t)}const t=this.performUpdate();return null!=t&&await t,!this.isUpdatePending}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this.Πi&&(this.Πi.forEach(((t,e)=>this[e]=t)),this.Πi=void 0);let e=!1;const i=this.L;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this.Π$()}catch(t){throw e=!1,this.Π$(),t}e&&this.E(i)}willUpdate(t){}E(t){var e;null===(e=this.ΠU)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}"Π$"(){this.L=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.Πg}shouldUpdate(t){return!0}update(t){void 0!==this.Πk&&(this.Πk.forEach(((t,e)=>this.Πj(e,this[e],t))),this.Πk=void 0),this.Π$()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var p,v,y,b;g.finalized=!0,g.elementProperties=new Map,g.elementStyles=[],g.shadowRootOptions={mode:"open"},null===(h=(l=globalThis).reactiveElementPlatformSupport)||void 0===h||h.call(l,{ReactiveElement:g}),(null!==(c=(u=globalThis).reactiveElementVersions)&&void 0!==c?c:u.reactiveElementVersions=[]).push("1.0.0-rc.2");const _=globalThis.trustedTypes,S=_?_.createPolicy("lit-html",{createHTML:t=>t}):void 0,w=`lit$${(Math.random()+"").slice(9)}$`,$="?"+w,C=`<${$}>`,D=document,x=(t="")=>D.createComment(t),M=t=>null===t||"object"!=typeof t&&"function"!=typeof t,N=Array.isArray,k=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E=/-->/g,O=/>/g,P=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,T=/'/g,H=/"/g,U=/^(?:script|style|textarea)$/i,R=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),Y=Symbol.for("lit-noChange"),A=Symbol.for("lit-nothing"),z=new WeakMap,I=D.createTreeWalker(D,129,null,!1);class j{constructor({strings:t,_$litType$:e},i){let n;this.parts=[];let s=0,r=0;const o=t.length-1,a=this.parts,[l,h]=((t,e)=>{const i=t.length-1,n=[];let s,r=2===e?"<svg>":"",o=k;for(let e=0;e<i;e++){const i=t[e];let a,l,h=-1,c=0;for(;c<i.length&&(o.lastIndex=c,l=o.exec(i),null!==l);)c=o.lastIndex,o===k?"!--"===l[1]?o=E:void 0!==l[1]?o=O:void 0!==l[2]?(U.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=P):void 0!==l[3]&&(o=P):o===P?">"===l[0]?(o=null!=s?s:k,h=-1):void 0===l[1]?h=-2:(h=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?P:'"'===l[3]?H:T):o===H||o===T?o=P:o===E||o===O?o=k:(o=P,s=void 0);const u=o===P&&t[e+1].startsWith("/>")?" ":"";r+=o===k?i+C:h>=0?(n.push(a),i.slice(0,h)+"$lit$"+i.slice(h)+w+u):i+w+(-2===h?(n.push(void 0),e):u)}const a=r+(t[i]||"<?>")+(2===e?"</svg>":"");return[void 0!==S?S.createHTML(a):a,n]})(t,e);if(this.el=j.createElement(l,i),I.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=I.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(w)){const i=h[r++];if(t.push(e),void 0!==i){const t=n.getAttribute(i.toLowerCase()+"$lit$").split(w),e=/([.?@])?(.*)/.exec(i);a.push({type:1,index:s,name:e[2],strings:t,ctor:"."===e[1]?Z:"?"===e[1]?q:"@"===e[1]?V:W})}else a.push({type:6,index:s})}for(const e of t)n.removeAttribute(e)}if(U.test(n.tagName)){const t=n.textContent.split(w),e=t.length-1;if(e>0){n.textContent=_?_.emptyScript:"";for(let i=0;i<e;i++)n.append(t[i],x()),I.nextNode(),a.push({type:2,index:++s});n.append(t[e],x())}}}else if(8===n.nodeType)if(n.data===$)a.push({type:2,index:s});else{let t=-1;for(;-1!==(t=n.data.indexOf(w,t+1));)a.push({type:7,index:s}),t+=w.length-1}s++}}static createElement(t,e){const i=D.createElement("template");return i.innerHTML=t,i}}function L(t,e,i=t,n){var s,r,o,a;if(e===Y)return e;let l=void 0!==n?null===(s=i.Σi)||void 0===s?void 0:s[n]:i.Σo;const h=M(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==h&&(null===(r=null==l?void 0:l.O)||void 0===r||r.call(l,!1),void 0===h?l=void 0:(l=new h(t),l.T(t,i,n)),void 0!==n?(null!==(o=(a=i).Σi)&&void 0!==o?o:a.Σi=[])[n]=l:i.Σo=l),void 0!==l&&(e=L(t,l.S(t,e.values),l,n)),e}class B{constructor(t,e){this.l=[],this.N=void 0,this.D=t,this.M=e}u(t){var e;const{el:{content:i},parts:n}=this.D,s=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:D).importNode(i,!0);I.currentNode=s;let r=I.nextNode(),o=0,a=0,l=n[0];for(;void 0!==l;){if(o===l.index){let e;2===l.type?e=new F(r,r.nextSibling,this,t):1===l.type?e=new l.ctor(r,l.name,l.strings,this,t):6===l.type&&(e=new J(r,this,t)),this.l.push(e),l=n[++a]}o!==(null==l?void 0:l.index)&&(r=I.nextNode(),o++)}return s}v(t){let e=0;for(const i of this.l)void 0!==i&&(void 0!==i.strings?(i.I(t,i,e),e+=i.strings.length-2):i.I(t[e])),e++}}class F{constructor(t,e,i,n){this.type=2,this.N=void 0,this.A=t,this.B=e,this.M=i,this.options=n}setConnected(t){var e;null===(e=this.P)||void 0===e||e.call(this,t)}get parentNode(){return this.A.parentNode}get startNode(){return this.A}get endNode(){return this.B}I(t,e=this){t=L(this,t,e),M(t)?t===A||null==t||""===t?(this.H!==A&&this.R(),this.H=A):t!==this.H&&t!==Y&&this.m(t):void 0!==t._$litType$?this._(t):void 0!==t.nodeType?this.$(t):(t=>{var e;return N(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.g(t):this.m(t)}k(t,e=this.B){return this.A.parentNode.insertBefore(t,e)}$(t){this.H!==t&&(this.R(),this.H=this.k(t))}m(t){const e=this.A.nextSibling;null!==e&&3===e.nodeType&&(null===this.B?null===e.nextSibling:e===this.B.previousSibling)?e.data=t:this.$(D.createTextNode(t)),this.H=t}_(t){var e;const{values:i,_$litType$:n}=t,s="number"==typeof n?this.C(t):(void 0===n.el&&(n.el=j.createElement(n.h,this.options)),n);if((null===(e=this.H)||void 0===e?void 0:e.D)===s)this.H.v(i);else{const t=new B(s,this),e=t.u(this.options);t.v(i),this.$(e),this.H=t}}C(t){let e=z.get(t.strings);return void 0===e&&z.set(t.strings,e=new j(t)),e}g(t){N(this.H)||(this.H=[],this.R());const e=this.H;let i,n=0;for(const s of t)n===e.length?e.push(i=new F(this.k(x()),this.k(x()),this,this.options)):i=e[n],i.I(s),n++;n<e.length&&(this.R(i&&i.B.nextSibling,n),e.length=n)}R(t=this.A.nextSibling,e){var i;for(null===(i=this.P)||void 0===i||i.call(this,!1,!0,e);t&&t!==this.B;){const e=t.nextSibling;t.remove(),t=e}}}class W{constructor(t,e,i,n,s){this.type=1,this.H=A,this.N=void 0,this.V=void 0,this.element=t,this.name=e,this.M=n,this.options=s,i.length>2||""!==i[0]||""!==i[1]?(this.H=Array(i.length-1).fill(A),this.strings=i):this.H=A}get tagName(){return this.element.tagName}I(t,e=this,i,n){const s=this.strings;let r=!1;if(void 0===s)t=L(this,t,e,0),r=!M(t)||t!==this.H&&t!==Y,r&&(this.H=t);else{const n=t;let o,a;for(t=s[0],o=0;o<s.length-1;o++)a=L(this,n[i+o],e,o),a===Y&&(a=this.H[o]),r||(r=!M(a)||a!==this.H[o]),a===A?t=A:t!==A&&(t+=(null!=a?a:"")+s[o+1]),this.H[o]=a}r&&!n&&this.W(t)}W(t){t===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Z extends W{constructor(){super(...arguments),this.type=3}W(t){this.element[this.name]=t===A?void 0:t}}class q extends W{constructor(){super(...arguments),this.type=4}W(t){t&&t!==A?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class V extends W{constructor(){super(...arguments),this.type=5}I(t,e=this){var i;if((t=null!==(i=L(this,t,e,0))&&void 0!==i?i:A)===Y)return;const n=this.H,s=t===A&&n!==A||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,r=t!==A&&(n===A||s);s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,t),this.H=t}handleEvent(t){var e,i;"function"==typeof this.H?this.H.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this.H.handleEvent(t)}}class J{constructor(t,e,i){this.element=t,this.type=6,this.N=void 0,this.V=void 0,this.M=e,this.options=i}I(t){L(this,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var K,X,G,Q,tt,et;null===(v=(p=globalThis).litHtmlPlatformSupport)||void 0===v||v.call(p,j,F),(null!==(y=(b=globalThis).litHtmlVersions)&&void 0!==y?y:b.litHtmlVersions=[]).push("2.0.0-rc.3"),(null!==(K=(et=globalThis).litElementVersions)&&void 0!==K?K:et.litElementVersions=[]).push("3.0.0-rc.2");class it extends g{constructor(){super(...arguments),this.renderOptions={host:this},this.Φt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();super.update(t),this.Φt=((t,e,i)=>{var n,s;const r=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:e;let o=r._$litPart$;if(void 0===o){const t=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:null;r._$litPart$=o=new F(e.insertBefore(x(),t),t,void 0,i)}return o.I(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!1)}render(){return Y}}it.finalized=!0,it._$litElement$=!0,null===(G=(X=globalThis).litElementHydrateSupport)||void 0===G||G.call(X,{LitElement:it}),null===(tt=(Q=globalThis).litElementPlatformSupport)||void 0===tt||tt.call(Q,{LitElement:it});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const nt=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(i){i.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,t)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function st(t){return(e,i)=>void 0!==i?((t,e,i)=>{e.constructor.createProperty(i,t)})(t,e,i):nt(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function rt(t){return st({...t,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ot=1;
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const at=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends class{constructor(t){}T(t,e,i){this.Σdt=t,this.M=e,this.Σct=i}S(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}{constructor(t){var e;if(super(t),t.type!==ot||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const n=t[i];return null==n?e:e+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.St){this.St=new Set;for(const t in e)this.St.add(t);return this.render(e)}this.St.forEach((t=>{null==e[t]&&(this.St.delete(t),t.includes("-")?i.removeProperty(t):i[t]="")}));for(const t in e){const n=e[t];null!=n&&(this.St.add(t),t.includes("-")?i.setProperty(t,n):i[t]=n)}return Y}});var lt=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ht="[^\\s]+",ct=/\[([^]*?)\]/gm;function ut(t,e){for(var i=[],n=0,s=t.length;n<s;n++)i.push(t[n].substr(0,e));return i}var dt=function(t){return function(e,i){var n=i[t].map((function(t){return t.toLowerCase()})).indexOf(e.toLowerCase());return n>-1?n:null}};function ft(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0,s=e;n<s.length;n++){var r=s[n];for(var o in r)t[o]=r[o]}return t}var mt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],gt=["January","February","March","April","May","June","July","August","September","October","November","December"],pt=ut(gt,3),vt={dayNamesShort:ut(mt,3),dayNames:mt,monthNamesShort:pt,monthNames:gt,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},yt=ft({},vt),bt=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},_t={D:function(t){return String(t.getDate())},DD:function(t){return bt(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return bt(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return bt(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return bt(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return bt(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return bt(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return bt(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return bt(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return bt(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return bt(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return bt(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+bt(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+bt(Math.floor(Math.abs(e)/60),2)+":"+bt(Math.abs(e)%60,2)}},St=function(t){return+t-1},wt=[null,"[1-9]\\d?"],$t=[null,ht],Ct=["isPm",ht,function(t,e){var i=t.toLowerCase();return i===e.amPm[0]?0:i===e.amPm[1]?1:null}],Dt=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var i=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?i:-i}return 0}],xt=(dt("monthNamesShort"),dt("monthNames"),{default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"});var Mt=function(t,e,i){if(void 0===e&&(e=xt.default),void 0===i&&(i={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var n=[];e=(e=xt[e]||e).replace(ct,(function(t,e){return n.push(e),"@@@"}));var s=ft(ft({},yt),i);return(e=e.replace(lt,(function(e){return _t[e](t,s)}))).replace(/@@@/g,(function(){return n.shift()}))};function Nt(t){var e=t.split(":").map(Number);return 3600*e[0]+60*e[1]+e[2]}var kt,Et=function(){try{(new Date).toLocaleDateString("i")}catch(t){return"RangeError"===t.name}return!1}()?function(t,e){return t.toLocaleDateString(e.language,{year:"numeric",month:"long",day:"numeric"})}:function(t){return Mt(t,"mediumDate")},Ot=function(){try{(new Date).toLocaleString("i")}catch(t){return"RangeError"===t.name}return!1}()?function(t,e){return t.toLocaleString(e.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})}:function(t){return Mt(t,"haDateTime")},Pt=function(){try{(new Date).toLocaleTimeString("i")}catch(t){return"RangeError"===t.name}return!1}()?function(t,e){return t.toLocaleTimeString(e.language,{hour:"numeric",minute:"2-digit"})}:function(t){return Mt(t,"shortTime")},Tt=function(t){return t<10?"0"+t:t};function Ht(t){var e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return e>0?e+":"+Tt(i)+":"+Tt(n):i>0?i+":"+Tt(n):n>0?""+n:null}!function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(kt||(kt={}));var Ut=function(t,e,i){var n;switch(null==e?void 0:e.number_format){case kt.comma_decimal:n=["en-US","en"];break;case kt.decimal_comma:n=["de","es","it"];break;case kt.space_comma:n=["fr","sv","cs"];break;case kt.system:n=void 0;break;default:n=null==e?void 0:e.language}if(Number.isNaN=Number.isNaN||function t(e){return"number"==typeof e&&t(e)},!Number.isNaN(Number(t))&&Intl&&(null==e?void 0:e.number_format)!==kt.none)try{return new Intl.NumberFormat(n,Rt(t,i)).format(Number(t))}catch(e){return console.error(e),new Intl.NumberFormat(void 0,Rt(t,i)).format(Number(t))}return t?t.toString():""},Rt=function(t,e){var i=e||{};if("string"!=typeof t)return i;if(!e||!e.minimumFractionDigits&&!e.maximumFractionDigits){var n=t.indexOf(".")>-1?t.split(".")[1].length:0;i.minimumFractionDigits=n,i.maximumFractionDigits=n}return i};function Yt(t,e,i){if(e.has("config")||i)return!0;if(t.config.entity){var n=e.get("hass");return!n||n.states[t.config.entity]!==t.hass.states[t.config.entity]}return!1}function At(t,e){const i=Lt(e,t.duration);if(i&&"string"==typeof i)return Nt(i);if(i)return i;const n=Lt(e,t.start_time),s=Lt(e,t.end_time);return n&&s?(Date.parse(s)-Date.parse(n))/1e3:null}const zt=(t,e)=>{const i=new Date(e.last_changed).getTime();if(e.attributes.remaining){let n=Nt(e.attributes.remaining);if(jt(e,t.active_state)){const t=(new Date).getTime();n=Math.max(n-(t-i)/1e3,0)}return n}const n=Lt(e,t.end_time);if(n)return(Date.parse(n)-Date.now())/1e3;const s=Lt(e,t.start_time),r=Lt(e,t.duration);return s&&r?(Date.parse(s)-Date.now())/1e3+r:r?(i-Date.now())/1e3+r:void 0},It=(t,e)=>{const i=zt(t,e),n=At(t,e);if(n&&i)return(n-i)/n*100},jt=(t,e)=>!!t&&("string"==typeof e?t.state===e:e.includes(t.state)),Lt=(t,e)=>"fixed"in e?e.fixed:t.attributes[e.attribute];function Bt(t,e,i,n){if(!e)return"";if(n&&n[e])return n[e];if(i){const n=function(t,e,i,n){var s=void 0!==n?n:e.state;if("unknown"===s||"unavailable"===s)return t("state.default."+s);if(e.attributes.unit_of_measurement)return Ut(s,i)+" "+e.attributes.unit_of_measurement;var r=function(t){return function(t){return t.substr(0,t.indexOf("."))}(t.entity_id)}(e);if("input_datetime"===r){var o;if(!e.attributes.has_time)return o=new Date(e.attributes.year,e.attributes.month-1,e.attributes.day),Et(o,i);if(!e.attributes.has_date){var a=new Date;return o=new Date(a.getFullYear(),a.getMonth(),a.getDay(),e.attributes.hour,e.attributes.minute),Pt(o,i)}return o=new Date(e.attributes.year,e.attributes.month-1,e.attributes.day,e.attributes.hour,e.attributes.minute),Ot(o,i)}return"humidifier"===r&&"on"===s&&e.attributes.humidity?e.attributes.humidity+" %":"counter"===r||"number"===r?Ut(s,i):e.attributes.device_class&&t("component."+r+".state."+e.attributes.device_class+"."+e.state)||t("component."+r+".state._."+e.state)||e.state}(t.localize,i,t.locale,e);if(n!==e)return n}const s=function(t,e){return"idle"===e?t.localize("component.timer.state._.idle"):"paused"===e?t.localize("component.timer.state._.paused"):"active"===e?t.localize("component.timer.state._.active"):"on"===e?t.localize("component.switch.state._.on"):void 0}(t,e);return s||e[0].toUpperCase()+e.substring(1)}class Ft extends it{disconnectedCallback(){super.disconnectedCallback(),this._clearInterval()}connectedCallback(){var t;if(super.connectedCallback(),this.config&&this.config.entity){const e=null===(t=this.hass)||void 0===t?void 0:t.states[this.config.entity];e&&this._startInterval(e)}}render(){var t,e;const i=this.hass.states[this.config.entity];let n=0;i&&(n=null!==(t=It(this.config,i))&&void 0!==t?t:0);const s=Object.assign(Object.assign({},this.modConfig),{icon:null!==(e=this.modConfig.active_icon)&&void 0!==e?e:this.modConfig.icon});return jt(i,this.config.active_state)&&(this._timeRemaining||0)>0?R`
        <hui-generic-entity-row .hass=${this.hass} .config=${s}>
          ${this._renderBar(n)}
          <div class="text-content" style=${this._textStyle()}>
            ${Ht(this._timeRemaining||0)}
          </div>
        </hui-generic-entity-row>
        ${this._renderDebug(i,"active")}
      `:jt(i,this.config.pause_state)?R`
        <hui-generic-entity-row .hass=${this.hass} .config=${s}>
          <div class="status" style=${this._statusStyle()} @click=${this._handleClick}>
            ${Bt(this.hass,i.state,i,this.config.translations)}
          </div>
          <div class="text-content" style=${this._textStyle()}>
            ${Ht(this._timeRemaining||0)}
          </div>
        </hui-generic-entity-row>
        ${this._renderDebug(i,"pause")}
      `:jt(i,this.config.waiting_state)?R`
        <hui-generic-entity-row .hass=${this.hass} .config=${this.modConfig}>
          <div class="status" style=${this._statusStyle(!0)} @click=${this._handleClick}>
            ${Bt(this.hass,"scheduled_for",void 0,this.config.translations)} ${(t=>{const e=new Date(t.attributes.start_time),i=JSON.parse(localStorage.getItem("selectedLanguage")||'"en"')||"en";return Pt(e,i)})(i)}
          </div>
        </hui-generic-entity-row>
        ${this._renderDebug(i,"waiting")}
      `:R`
        <hui-generic-entity-row .hass=${this.hass} .config=${this.modConfig}>
          <div class="text-content">${Bt(this.hass,null==i?void 0:i.state,i,this.config.translations)}</div>
        </hui-generic-entity-row>
        ${this._renderDebug(i,"idle")}
      `}_renderBar(t){const e=at({width:this.modConfig.bar_width,direction:this.modConfig.bar_direction}),i=this._barStyle("100%",this.modConfig.bar_background),n=this._barStyle(t+"%",this.modConfig.bar_foreground);return R`<div class="bar-container" style=${e} @click=${this._handleClick}>
      <div class="bar" style=${i}>
        <div style=${n}>
      </div>
    </div>`}_renderDebug(t,e){return this.config.debug?t?R`<code>
      State: ${t.state} ( = ${e} mode)<br>
      Duration: ${At(this.config,t)}<br>
      Time remaining: ${zt(this.config,t)}<br>
      Counter: ${this._timeRemaining}
    </code>`:R`<code>No state found</code>`:""}_handleClick(){const t=new Event("hass-more-info",{composed:!0});t.detail={entityId:this.config.entity},this.dispatchEvent(t)}shouldUpdate(t){return!!this.config&&(!!t.has("_timeRemaining")||Yt(this,t,!1))}updated(t){if(super.updated(t),t.has("hass")){const e=this.hass.states[this.config.entity],i=t.get("hass");(null==i?void 0:i.states[this.config.entity])!==e?this._startInterval(e):e||this._clearInterval()}}_clearInterval(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}_startInterval(t){this._clearInterval(),this._calculateRemaining(t),jt(t,this.config.active_state)&&(this._interval=window.setInterval((()=>this._calculateRemaining(t)),1e3))}_calculateRemaining(t){this._timeRemaining=zt(this.config,t)}_barStyle(t,e){return at({width:t,background:e,height:this.modConfig.bar_height})}_textStyle(){return at({width:this.modConfig.text_width,"flex-shrink":"0"})}_statusStyle(t){const e=this.modConfig;return at({width:t?`calc(${e.bar_width} + ${e.text_width})`:e.bar_width,color:"var(--secondary-text-color, #eee)"})}static get styles(){return o`
      :host {
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .bar-container {
        cursor: pointer;
        min-height: 1.5em;
        display: flex;
        flex-shrink: 0;
        align-items: center;
      }
      .bar { margin-top: 2px; }
      .status { cursor: pointer; line-height: 1.5em; flex-shrink: 0; }
      .text-content { text-align: right; text-align: end; }
      code {
        display: block;
        background-color: #eee;
        margin: 0.5em 0 0 0;
        padding: 0.7rem;
        font-size: 0.9em;
      }
    `}get modConfig(){var t;if(!this.config.modifications)return this.config;const e=this.hass.states[this.config.entity],i=null!==(t=It(this.config,e))&&void 0!==t?t:0;let n=this.config;for(const t of this.config.modifications)(t.greater_than_eq&&i>=t.greater_than_eq||t.greater_than&&i>t.greater_than)&&(n=Object.assign(Object.assign({},n),t));return n}}t([st()],Ft.prototype,"hass",void 0),t([st()],Ft.prototype,"config",void 0),t([rt()],Ft.prototype,"_interval",void 0),t([rt()],Ft.prototype,"_timeRemaining",void 0),window.customCards=window.customCards||[],window.customCards.push({type:"timer-bar-card",name:"Timer Bar Card",description:"Display timer-related information as a progress bar"}),window.customElements.define("timer-bar-entity-row",Ft);let Wt=class extends it{static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error("Invalid configuration");this.config=function(t){return Object.assign(Object.assign({active_state:["active","on","manual","program","once_program"],pause_state:"paused",waiting_state:"waiting",end_time:{attribute:"end_time"},start_time:{attribute:"start_time"},duration:{attribute:"duration"},bar_width:"calc(70% - 7em)",bar_height:"8px",text_width:"3.5em",bar_background:"#eee",bar_foreground:"var(--mdc-theme-primary, #6200ee);"},t),{translations:Object.assign({scheduled_for:"Scheduled for",once_program:"Once Program",program:"Program",manual:"Manual",waiting:"Waiting"},t.translations)})}(t)}render(){const t=this.config;if(t.entity&&t.entities)return R`<hui-warning>Both entity and entities cannot be defined</hui-warning>`;if(t.entity)return R`<timer-bar-entity-row .config=${t} .hass=${this.hass}></timer-bar-entity-row>`;if(t.entities){const e=t.name&&!t.header_entity?t.name:void 0;return R`<ha-card header=${e}>
        <div class="card-content">
          ${t.header_entity?this._renderTitle():null}
          ${this._renderContent()}
        </div>
      </ha-card>`}return R`<hui-warning>Neither entity nor entities are defined</hui-warning>`}shouldUpdate(t){if(!this.config)return!1;if(t.has("config"))return!0;if(this.config.entity)return Yt(this,t,!1);this.updateComplete.then((()=>this._patchFontSize()));const e=t.get("hass");if(!e)return!0;for(const t of this._filteredEntities()){const i="string"==typeof t?t:t.entity;if(e.states[i]!==this.hass.states[i])return!0}const i=this.config.header_entity;return!(!i||e.states[i]===this.hass.states[i])}_renderContent(){return this._filteredEntities().map((t=>{const e=this.config.compressed?{height:"36px"}:{};let i=Object.assign(Object.assign({},this.config),{entity:t,name:""});return"string"!=typeof t&&(i=Object.assign(Object.assign({},i),t)),R`<timer-bar-entity-row
                    .config=${i}
                    .hass=${this.hass}
                    style=${at(e)}
                  ></timer-bar-entity-row>`}))}_renderTitle(){const t=this._filteredEntities().length>0?{"margin-bottom":"12px"}:{},e={entity:this.config.header_entity,secondary_info:this.config.header_secondary};return R`<hui-generic-entity-row
                  style=${at(t)}
                  .config=${e}
                  .hass=${this.hass}
                ></generic-entity-header>`}_patchFontSize(){var t;const e=this.renderRoot.querySelector("hui-generic-entity-row"),i=null===(t=null==e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector(".info");if(!i)return;const n=[...i.childNodes].filter((t=>t.nodeType===Node.TEXT_NODE&&t.textContent.trim()));if(n[0]){const t=document.createElement("span");t.style.fontSize="1.1em",i.insertBefore(t,n[0]),i.removeChild(n[0]),t.appendChild(n[0])}}_entitiesOfState(t,e){return t.filter((t=>jt(this.hass.states["string"==typeof t?t:t.entity],e)))}_filteredEntities(){return this.config.filter&&this.hass?this._entitiesOfState(this.config.entities,this.config.active_state).concat(this._entitiesOfState(this.config.entities,this.config.pause_state)).concat(this._entitiesOfState(this.config.entities,this.config.waiting_state)):this.config.entities}async getCardSize(){if(this.config.entity)return 1;let t=0;return this.config.header_entity?t+=1:this.config.name&&(t+=2),t+this._filteredEntities().length}};t([st()],Wt.prototype,"hass",void 0),t([rt()],Wt.prototype,"config",void 0),Wt=t([(t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:i,elements:n}=e;return{kind:i,elements:n,finisher(e){window.customElements.define(t,e)}}})(t,e))("timer-bar-card")],Wt);export{Wt as TimerBarCard};
