---

title: "Overview"
cards:
  - type: horizontal-stack
    cards:
      - type: custom:decluttering-card
        template: person
        variables:
          - name: yuval
      - type: custom:decluttering-card
        template: person
        variables:
          - name: tohar

  - type: entities
    title: "זמני היום"
    show_header_toggle: false
    entities:
      - entity: sensor.jewish_calendar_date
        name: "תאריך"
      - type: conditional
        conditions:
          - entity: binary_sensor.tzom
            state: 'on'
        row:
          entity: binary_sensor.tzom
      - type: conditional
        conditions:
          - entity: binary_sensor.is_omer
            state: 'on'
        row:
          entity: sensor.jewish_calendar_day_of_the_omer
          name: "ספירת העומר"
      - type: divider
      - entity: sensor.jewish_calendar_parshat_hashavua
        name: "פרשת השבוע"
      - entity: sensor.jewish_calendar_upcoming_candle_lighting
        type: custom:multiple-entity-row
        name: "הדלקת נרות"
        format: relative
        entities:
          - entity: sensor.jewish_calendar_upcoming_candle_lighting
            format: time
            name: false
      - entity: sensor.jewish_calendar_upcoming_havdalah
        type: custom:multiple-entity-row
        name: "הבדלה"
        format: relative
        entities:
          - entity: sensor.jewish_calendar_upcoming_havdalah
            format: time
            name: false

  - type: entities
    entities:
      - type: custom:sun-card
      - type: custom:hui-element
        card_type: weather-forecast
        entity: weather.openweathermap
        show_forecast: true
      - type: custom:hui-element
        card_type: markdown
        content: >-
          {{
            states.sensor.israel_weather_forecast.attributes.entries[0].summary
          }}
      - type: custom:air-visual-card
        hide_title: true
        air_pollution_level: sensor.u_s_air_pollution_level
        air_quality_index: sensor.u_s_air_quality_index
        main_pollutant: sensor.u_s_main_pollutant

  - type: conditional
    conditions:
      - entity: binary_sensor.issur_melacha_eve
        state: 'on'
    card:
      type: entities
      entities:
        - type: custom:button-card
          color_type: label-card
          color: rgb(44, 109, 214)
          name: "פיקוד שבת"
        - type: custom:hui-element
          card_type: horizontal-stack
          cards:
            - type: custom:button-card
              color_type: blank-card
            - type: custom:button-card
              entity: switch.shabbat_mode
            - type: custom:button-card
              entity: switch.shabbat_plate
              name: "פלטה"
              icon: >-
                [[[
                  if (entity.state == 'off')
                    return 'mdi:pot';
                  else
                    return 'mdi:pot-steam';
                ]]]
            - type: custom:button-card
              color_type: blank-card
        - type: custom:time-picker-card
          entity: input_datetime.shabbat_lights_off_time
          link_values: true
          minute_step: 30
          layout:
            name: inside
            align_controls: right

  - type: horizontal-stack
    cards:
      - type: custom:button-card
        entity: switch.night_light_override
      - type: custom:button-card
        entity: switch.disable_auto_clean
      - type: custom:button-card
        entity: switch.guest_mode

  - type: custom:auto-entities
    card:
      type: entities
      title: "Active Lights"
      show_header_toggle: false
    show_empty: false
    filter:
      include:
        - domain: light
          state: 'on'
        - domain: light
          state: 'unavailable'
      exclude:
        - entity_id: '*lights'

  - type: entities
    show_header_toggle: false
    entities:
      - type: custom:hui-element
        card_type: light
        entity: light.living_room_ceiling_light
      - type: custom:hui-element
        card_type: horizontal-stack
        cards:
          - type: light
            entity: light.wall_light_right
          - type: light
            entity: light.wall_light_left

  - type: custom:simple-thermostat
    entity: climate.living_room

  - type: entities
    entities:
      - type: custom:hui-element
        card_type: picture-entity
        entity: vacuum.mi_vacuum
        camera_image: camera.vacuum_map
      - type: custom:hui-element
        card_type: markdown
        entity_id: vacuum.mi_vacuum
        content: |
          Last cleaned at {{ as_timestamp(states('sensor.mi_vacuum_last_clean_end')) | timestamp_custom('%A at %H:%M')}}
          It took {{ ((states('sensor.mi_vacuum_last_clean_duration') | int(default=0)) / 60) | int }} minutes to clean {{ (states('sensor.mi_vacuum_last_clean_area') | round(1)) }} meters.

  - type: entities
    entities:
      - type: custom:button-card
        color_type: label-card
        color: rgb(44, 109, 214)
        name: "Dishwasher"
      - type: custom:hui-element
        card_type: glance
        entities:
          - entity: binary_sensor.400090386855001425_bsh_common_status_doorstate
            name: "Door"
          - entity: sensor.400090386855001425_bsh_common_setting_powerstate
            name: "Power state"
            tap_action:
              action: call-service
              service: select.select_option
              data:
                option: 'on'
              target:
                entity_id: select.400090386855001425_bsh_common_setting_powerstate
          - entity: sensor.400090386855001425_bsh_common_status_operationstate
            name: "OP state"
      - type: conditional
        conditions:
          - entity: binary_sensor.400090386855001425_bsh_common_option_remainingprogramtimeisestimated
            state: 'on'
        row:
          entity: sensor.400090386855001425_bsh_common_option_remainingprogramtime
          format: relative
          name: "Remaining time"
      - type: conditional
        conditions:
          - entity: binary_sensor.400090386855001425_bsh_common_option_remainingprogramtimeisestimated
            state: 'on'
        row:
          entity: sensor.400090386855001425_bsh_common_option_programprogress
          type: custom:bar-card
          entity_row: true
          name: "Progress"

  - type: entities
    entities:
      - type: custom:button-card
        color_type: label-card
        color: rgb(44, 109, 214)
        name: "Ensuite"
      - type: custom:decluttering-card
        template: env
        variables:
          - room: ensuite
      - type: custom:decluttering-card
        template: room_multisensor
        variables:
          - room: ensuite
      - type: custom:hui-element
        card_type: horizontal-stack
        cards:
          - type: custom:button-card
            entity: switch.ensuite_heater
            state:
              - value: 'on'
                icon: mdi:thermometer-chevron-up
                color: '#F75C04'
              - value: 'off'
                icon: mdi:thermometer-off
          - type: custom:button-card
            color_type: blank-card

  - type: entities
    entities:
      - type: custom:battery-entity-row
        entity: sensor.yuval_battery_level
        name: "Yuval battery"
        charging: true
      - entity: sensor.yuval_next_alarm
        name: "Alarm"
      - type: divider
      - type: custom:battery-entity-row
        entity: sensor.tohar_battery_level
        name: "Tohar battery"
        charging: true
      - entity: sensor.tohar_next_alarm
        name: "Alarm"

  - type: entities
    entities:
      - type: custom:decluttering-card
        template: room_multisensor
        variables:
          - room: bathroom
      - type: custom:hui-element
        card_type: horizontal-stack
        cards:
          - type: custom:button-card
            entity: switch.vent
            icon: 'mdi:fan'
            state:
              - value: 'on'
                spin: true
              - value: 'off'
                spin: false
          - type: custom:button-card
            color_type: blank-card
