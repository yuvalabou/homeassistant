##################################################
#     Home Assistant Main Configuration File     #
#            Yuval Aboulafia - 202112            #
##################################################

##################################################
#                      CORE                      #
##################################################
homeassistant:
  name: Aboulafia
  latitude: !secret home_lat
  longitude: !secret home_lon
  elevation: !secret elevation
  time_zone: Asia/Jerusalem
  customize: !include customize.yaml
#  allowlist_external_dirs:
#    - /config
  customize_glob:
    sensor.*_energy_wh:
      last_reset: '1970-01-01T00:00:00+00:00'
    sensor.*_energy_kwh:
      last_reset: '1970-01-01T00:00:00+00:00'

config:
cloud:
mobile_app:

##################################################
#                       GUI                      #
##################################################
frontend:
  themes: !include_dir_merge_named themes
lovelace:
  mode: yaml
  resources: !include lovelace/resources/resources.yaml
  dashboards:
    pc-dashboard:
      title: "PC dashboard"
      icon: mdi:desktop-mac-dashboard
      mode: yaml
      filename: lovelace/dashboards/dashboard-pc.yaml
    dashboard-mobile-yuval:
      title: "Yuval dashboard"
      icon: mdi:cellphone
      mode: yaml
      filename: lovelace/dashboards/dashboard-mobile-yuval.yaml
    dashboard-mobile-tohar:
      title: "Tohar dashboard"
      icon: mdi:cellphone
      mode: yaml
      filename: lovelace/dashboards/dashboard-mobile-tohar.yaml
map:
panel_iframe:
  zigbee2mqtt:
    title: "Zigbee2mqtt"
    url: !secret zigbee2mqtt_addr
    icon: mdi:zigbee

##################################################
#                     PERSONS                    #
##################################################
person: !include_dir_merge_list components/person
device_tracker: !include_dir_merge_list components/device_tracker

##################################################
#                   DISCOVERY                    #
##################################################
discovery:
zeroconf:
ssdp:

##################################################
#                  INTEGRATIONS                  #
##################################################
automation: !include_dir_merge_list automation
binary_sensor: !include_dir_merge_list components/binary_sensor
blueprint:
camera: !include_dir_merge_list components/camera
energy:
google:
  client_id: !secret google_cal_id
  client_secret: !secret google_cal_secret
group: !include_dir_merge_named components/group
home_connect:
  client_id: !secret client_id
  client_secret: !secret client_secret
input_boolean: !include_dir_merge_named components/input_boolean
input_datetime: !include_dir_merge_named components/input_datetime
input_number: !include_dir_merge_named components/input_number
input_select: !include_dir_merge_named components/input_select
input_text: !include_dir_merge_named components/input_text
jewish_calendar:
  language: hebrew
light: !include_dir_merge_list components/light
mqtt:
  broker: !secret nanopi_neo2
notify: !include_dir_merge_list components/notify
scene: !include_dir_merge_list components/scene
script: !include_dir_merge_named components/script
sensor: !include_dir_merge_list components/sensor
# spotify:
#   client_id: !secret spotify_id
#   client_secret: !secret spotify_secret
sun:
switch: !include_dir_merge_list components/switch
system_health:
template: !include_dir_merge_list components/template
timer: !include_dir_merge_named components/timer
tts:
  - platform: microsoft
    api_key: !secret azure_tts
    language: he-il
    type: HilaNeural
updater:
utility_meter: !include_dir_merge_named components/sensor/utility_meter
zone: !include_dir_merge_list components/zone

##################################################
#                  LOG COMPONENTS                #
##################################################
history: !include components/logging/history.yaml
logbook: !include components/logging/logbook.yaml
recorder: !include components/logging/recorder.yaml
logger:
  default: warning
system_log:
