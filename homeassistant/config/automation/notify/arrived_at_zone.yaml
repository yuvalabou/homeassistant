---

- alias: "Notify - Arrived at zone"
  id: 050ed8f0-0d39-46f9-9b9d-90a55820f5be
  trigger:
    - platform: zone
      entity_id: person.yuval
      zone: zone.hirsh
      event: enter
      id: "yuval"
    - platform: zone
      entity_id: person.yuval
      zone: zone.home
      event: enter
      id: "yuval_home"
    - platform: zone
      entity_id: person.tohar
      zone: zone.melody
      event: enter
      id: "tohar"
    - platform: zone
      entity_id: person.tohar
      zone: zone.gelato
      event: enter
      id: "tohar"
    - platform: zone
      entity_id: person.tohar
      zone: zone.home
      event: enter
      id: "tohar_home"
  action:
    choose:
      - conditions:
        - condition: trigger
          id: 'yuval'
        sequence:
          - service: notify.mobile_app_tohar
            data:
              title: "יובל הגיע בשלום לעבודה"
              message: "Arrived at {{ states('person.yuval') }}"
      - conditions:
        - condition: trigger
          id: 'tohar'
        sequence:
          - service: notify.mobile_app_yuval
            data:
              title: "טוהר הגיעה בשלום לעבודה"
              message: "Arrived at {{ states('person.tohar') }}"
      - conditions:
        - condition: trigger
          id: 'yuval_home'
        - condition: state
          entity_id: person.tohar
          state: 'not_home'
        sequence:
          - service: notify.mobile_app_tohar
            data:
              title: "יובל הגיע הביתה בשלום"
              message: "Arrived at {{ states('person.yuval') }}"
      - conditions:
        - condition: trigger
          id: 'tohar_home'
        - condition: state
          entity_id: person.yuval
          state: 'not_home'
        sequence:
          - service: notify.mobile_app_yuval
            data:
              title: "טוהר הגיעה הביתה בשלום"
              message: "Arrived at {{ states('person.tohar') }}"
